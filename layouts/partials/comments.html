{{- /* Comments area start */ -}}
<script
  src="https://giscus.app/client.js"
  id="giscus-m"
  data-repo="letterl/hugo-page-log"
  data-repo-id="R_kgDOH5svhA"
  data-category="Announcements"
  data-category-id="DIC_kwDOH5svhM4CRHVv"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="light"
  data-lang="zh-CN"
  crossorigin="anonymous"
  async
></script>
<script>
  var target = document.getElementById("top");
  console.log(target);
  var options = {
    attributes: true, //观察node对象的属性
    attributeFilter: ["class"], //只观察class属性
  };
    //获取 target 的class初始值
    var targetClass=target.getAttribute('class')
    if(targetClass=='dark'){
        document.getElementById('giscus-m').setAttribute('data-theme','dark')
    }else {
        document.getElementById('giscus-m').setAttribute('data-theme','light')
    }
  
  var mb = new MutationObserver(function (mutationRecord, observer) {
    //观察为dark 修改giscus-m的theme为light
    if (mutationRecord[0].target.className == "dark") {
      document.getElementById("giscus-m").setAttribute("data-theme", "dark");
      //重新加载giscus-m
      document.getElementById('giscus-m').remove()
            var giscus=document.createElement('script')
            giscus.src="https://giscus.app/client.js"
            giscus.id="giscus-m"
            giscus.setAttribute('data-theme','dark')
            target.appendChild(giscus)
    }
  });
  mb.observe(target, options);
</script>
{{- /* Comments area end */ -}}
